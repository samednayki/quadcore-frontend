{"ast":null,"code":"var _jsxFileName = \"/Users/macbook/Desktop/all/quadcore-frontend/src/context/AuthContext.tsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useContext, useEffect, useState } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AuthContext = /*#__PURE__*/createContext(undefined);\nconst LOGIN_URL = 'http://localhost:8080/auth/login';\nconst LOGIN_BODY = {\n  agency: 'internship',\n  user: 'internship',\n  password: '@San2025'\n};\nexport const AuthProvider = ({\n  children\n}) => {\n  _s();\n  const [token, setToken] = useState(null);\n  const [userInfo, setUserInfo] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const login = async () => {\n    setLoading(true);\n    try {\n      var _data$body, _data$body2, _data$body3;\n      const response = await fetch(LOGIN_URL, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(LOGIN_BODY)\n      });\n      const data = await response.json();\n      setToken(((_data$body = data.body) === null || _data$body === void 0 ? void 0 : _data$body.token) || null);\n      setUserInfo(((_data$body2 = data.body) === null || _data$body2 === void 0 ? void 0 : _data$body2.userInfo) || null);\n      if ((_data$body3 = data.body) !== null && _data$body3 !== void 0 && _data$body3.token) {\n        console.log('Login successfully');\n        console.log('Token:', data.body.token);\n      }\n    } catch (error) {\n      setToken(null);\n      setUserInfo(null);\n    } finally {\n      setLoading(false);\n    }\n  };\n  useEffect(() => {\n    login(); // Her zaman yeni token al\n  }, []);\n  useEffect(() => {\n    // Token değiştiğinde localStorage'a kaydet\n    if (token) {\n      localStorage.setItem('token', token);\n    }\n  }, [token]);\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: {\n      token,\n      userInfo,\n      loading,\n      login\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 73,\n    columnNumber: 5\n  }, this);\n};\n_s(AuthProvider, \"IQVWJH3umirdbr1mG1eaay3pVps=\");\n_c = AuthProvider;\nexport const useAuth = () => {\n  _s2();\n  const context = useContext(AuthContext);\n  if (!context) throw new Error('useAuth must be used within AuthProvider');\n  return context;\n};\n_s2(useAuth, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\nexport {};\nvar _c;\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"names":["React","createContext","useContext","useEffect","useState","jsxDEV","_jsxDEV","AuthContext","undefined","LOGIN_URL","LOGIN_BODY","agency","user","password","AuthProvider","children","_s","token","setToken","userInfo","setUserInfo","loading","setLoading","login","_data$body","_data$body2","_data$body3","response","fetch","method","headers","body","JSON","stringify","data","json","console","log","error","localStorage","setItem","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","useAuth","_s2","context","Error","$RefreshReg$"],"sources":["/Users/macbook/Desktop/all/quadcore-frontend/src/context/AuthContext.tsx"],"sourcesContent":["import React, { createContext, useContext, useEffect, useState, ReactNode } from 'react';\n\ninterface LoginRequest {\n  agency: string;\n  user: string;\n  password: string;\n}\n\ninterface UserInfo {\n  id: string;\n  code: string;\n  name: string;\n  email?: string;\n  // ... diğer gerekli alanlar (gerekirse genişlet)\n}\n\ninterface AuthContextType {\n  token: string | null;\n  userInfo: UserInfo | null;\n  loading: boolean;\n  login: () => Promise<void>;\n}\n\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\n\nconst LOGIN_URL = 'http://localhost:8080/auth/login';\nconst LOGIN_BODY: LoginRequest = {\n  agency: 'internship',\n  user: 'internship',\n  password: '@San2025',\n};\n\nexport const AuthProvider = ({ children }: { children: ReactNode }) => {\n  const [token, setToken] = useState<string | null>(null);\n  const [userInfo, setUserInfo] = useState<UserInfo | null>(null);\n  const [loading, setLoading] = useState(true);\n\n  const login = async () => {\n    setLoading(true);\n    try {\n      const response = await fetch(LOGIN_URL, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(LOGIN_BODY),\n      });\n      const data = await response.json();\n      setToken(data.body?.token || null);\n      setUserInfo(data.body?.userInfo || null);\n      if (data.body?.token) {\n        console.log('Login successfully');\n        console.log('Token:', data.body.token);\n      }\n    } catch (error) {\n      setToken(null);\n      setUserInfo(null);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    login(); // Her zaman yeni token al\n  }, []);\n\n  useEffect(() => {\n    // Token değiştiğinde localStorage'a kaydet\n    if (token) {\n      localStorage.setItem('token', token);\n    }\n  }, [token]);\n\n  return (\n    <AuthContext.Provider value={{ token, userInfo, loading, login }}>\n      {children}\n    </AuthContext.Provider>\n  );\n};\n\nexport const useAuth = () => {\n  const context = useContext(AuthContext);\n  if (!context) throw new Error('useAuth must be used within AuthProvider');\n  return context;\n};\n\nexport {};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}